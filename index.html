<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Foodie - A Taste of India</title>
    <!-- ===== ICONS & CSS ===== -->
    <!-- Boxicons for UI icons -->
    <link href="https://unpkg.com/boxicons@latest/css/boxicons.min.css" rel="stylesheet">
    <!-- Main CSS stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- ===== HEADER / NAVBAR ===== -->
    <!-- Contains logo, navigation links and cart icon with active page highlighting -->
    <header>
        <div class="container">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="Indian Foodie Logo"> Indian Foodie
            </a>
            <nav class="nav-links">
                <a href="index.html" class="nav-link active-link">Home</a>
                <a href="catering.html" class="nav-link">Catering</a>
                <a href="admin.html" class="nav-link">Admin</a>
                <a href="user.html" class="nav-link">User</a>
                <!-- Cart icon with item count badge -->
                <a href="#" class="cart-icon">
                    <i class='bx bx-cart'></i>
                    <span class="cart-count">0</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- ===== CART SIDEBAR ===== -->
    <!-- Displays user cart with total and checkout button -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <i class='bx bx-x' id="close-cart"></i>
        </div>
        <div class="cart-items">
            <!-- Cart items will be dynamically added here -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total-price">‚Çπ0</span>
            </div>
            <button class="btn checkout-btn">üí≥Checkout</button>
        </div>
    </div>

    <!-- ===== MAIN CONTENT ===== -->
    <main>
        <!-- === HERO SECTION === -->
        <!-- Intro banner for the website -->
        <section class="hero">
            <div class="hero-content container">
                <h1>Welcome to Indian Foodie</h1>
                <p>Discover the rich and aromatic flavors of authentic Indian cuisine.</p>
                <div class="hero-buttons">
                    <a href="user.html" class="btn btn-primary">Get Started</a>
                    <a href="admin.html" class="btn btn-secondary">Admin Login</a>
                </div>
            </div>
        </section>
        <!-- === FEATURES SECTION === -->
        <!-- Highlights unique selling points of the platform -->
        <section class="features container">
            <h2>Why Choose Indian Foodie?</h2>
            <div class="feature-cards">
                <div class="card">
                    <h3>Share Your Culinary Heritage</h3>
                    <p>Showcase your family's secret recipes and traditional Indian dishes with our easy-to-use
                        platform.</p>
                </div>
                <div class="card">
                    <h3>Explore Regional Delicacies</h3>
                    <p>From the spicy curries of the North to the savory dosas of the South, find your next favorite
                        Indian meal here.</p>
                </div>
                <div class="card">
                    <h3>Effortless Management</h3>
                    <p>Our simple tools make it easy to manage your menu, update prices, and connect with customers.</p>
                </div>
            </div>
        </section>
        <hr class="section-divider">
        <!-- === MENU SECTION === -->
        <!-- Weekly special dishes displayed in a grid layout -->
        <section class="menu section bd-container" id="menu">
            <span class="section-subtitle">Special</span>
            <h2 class="section-title">Menu Of The Week</h2>
            <div class="menu__container bd-grid">
                <!-- Individual dish cards -->
                <div class="menu__content">
                    <img src="images/plate1.png" alt="" class="menu__img">
                    <h3 class="menu__name">Hyderabadi Biryani</h3>
                    <span class="menu__detail">Trademark Dish</span>
                    <span class="menu__preci">‚Çπ328</span>
                    <a href="#" class="button menu__button"><i class="bx bx-cart-alt"></i></a>
                </div>
                <div class="menu__content">
                    <img src="images/plate2.png" alt="" class="menu__img">
                    <h3 class="menu__name">Chicken Salad</h3>
                    <span class="menu__detail">Trademark Dish</span>
                    <span class="menu__preci">‚Çπ321</span>
                    <a href="#" class="button menu__button"><i class="bx bx-cart-alt"></i></a>
                </div>
                <div class="menu__content">
                    <img src="images/plate3.png" alt="" class="menu__img">
                    <h3 class="menu__name">Chicken Biryani</h3>
                    <span class="menu__detail">Trademark Dish</span>
                    <span class="menu__preci">‚Çπ277</span>
                    <a href="#" class="button menu__button"><i class="bx bx-cart-alt"></i></a>
                </div>
                <div class="menu__content">
                    <img src="images/plate4.png" alt="" class="menu__img" width="220px">
                    <h3 class="menu__name">Masala Roasted Whole Chicken</h3>
                    <span class="menu__detail">Trademark Dish</span>
                    <span class="menu__preci">‚Çπ357</span>
                    <a href="#" class="button menu__button"><i class="bx bx-cart-alt"></i></a>
                </div>
                <div class="menu__content">
                    <img src="images/plate5.png" alt="" class="menu__img" width="220px">
                    <h3 class="menu__name">Citrus Chicken & Quinoa Salad </h3>
                    <span class="menu__detail">Trademark Dish</span>
                    <span class="menu__preci">‚Çπ248</span>
                    <a href="#" class="button menu__button"><i class="bx bx-cart-alt"></i></a>
                </div>
                <div class="menu__content">
                    <img src="images/plate66.png" alt="" class="menu__img">
                    <h3 class="menu__name">Vegetarian Cuisine</h3>
                    <span class="menu__detail">Trademark Dish</span>
                    <span class="menu__preci">‚Çπ350</span>
                    <a href="#" class="button menu__button"><i class="bx bx-cart-alt"></i></a>
                </div>
            </div>
        </section>
    </main>

    <!-- ===== FOOTER ===== -->
    <!-- Includes brand info and social media links -->
    <footer>
        <div class="container footer-content">
            <a href="index.html" class="footer-link">
                <img src="images/logo.png" alt="Indian Foodie Logo">
                <p>&copy; 2025 Indian Foodie ‚Äî From Our Kitchen To Yours.</p>
            </a>
            <div class="footer-social">
                <a href="https://www.facebook.com/" target="_blank"><i class='bx bxl-facebook'></i></a>
                <a href="https://www.instagram.com/" target="_blank"><i class='bx bxl-instagram'></i></a>
                <a href="https://x.com/" target="_blank"><i class='bx bxl-twitter'></i></a>
            </div>
        </div>
    </footer>

    <!-- ===== SCRIPT SECTION ===== -->
    <script type="module">
        // === Firebase Imports ===
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
        import {
            getAuth,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            createUserWithEmailAndPassword
        } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

        import {
            getFirestore,
            collection,
            addDoc,
            getDocs,
            doc,
            setDoc,
            deleteDoc,
            updateDoc,
            getDoc,
            query,
            where,
            writeBatch
        } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

        // === Firebase Config ===
        const firebaseConfig = {
            apiKey: "AIzaSyCXk7V8qFm0Ym9fEAfqJsUBa5oZQVq2hO4",
            authDomain: "catering-reservation-ord-e2249.firebaseapp.com",
            projectId: "catering-reservation-ord-e2249",
            storageBucket: "catering-reservation-ord-e2249.firebasestorage.app",
            messagingSenderId: "536906317721",
            appId: "1:536906317721:web:13d870e28f09d73d4c7987"
        };

        // === Initialize Firebase ===
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // === Make Firestore Global ===
        window.db = db;
        window.firestore = {
            collection, addDoc, getDocs, doc, setDoc, deleteDoc, updateDoc, getDoc, query, where, writeBatch
        };

        // === Make Auth Global ===
        window.auth = {
            getAuth: () => auth,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            createUserWithEmailAndPassword
        };

        // === NAVBAR AUTO-LOGOUT BUTTON ===
        onAuthStateChanged(auth, (user) => {
            const nav = document.querySelector("nav");
            const existingLogout = document.getElementById("logout-link");

            if (existingLogout) existingLogout.remove();

            if (user) {
                const logoutLink = document.createElement("a");
                logoutLink.href = "#";
                logoutLink.textContent = "Logout (" + user.email + ")";
                logoutLink.id = "logout-link";
                logoutLink.className = "nav-link";

                nav.appendChild(logoutLink);

                logoutLink.addEventListener("click", (e) => {
                    e.preventDefault();
                    signOut(auth).then(() => {
                        alert("You have logged out successfully!");
                        window.location.href = "index.html";
                    });
                });
            }
        });

        // === IMPORT MENU FROM HTML ‚Üí FIRESTORE ===
        window.importMenuToFirestore = async () => {
            const menuItems = document.querySelectorAll(".menu__content");

            if (menuItems.length === 0) {
                alert("‚ùå Couldn't find .menu__content in index.html!");
                return;
            }

            let imported = 0;

            for (let item of menuItems) {
                const name = item.querySelector(".menu__name")?.innerText || "Unnamed";
                const description = item.querySelector(".menu__detail")?.innerText || "No description";
                const priceText = item.querySelector(".menu__preci")?.innerText.replace("‚Çπ", "").trim();
                const price = parseInt(priceText) || 0;
                const image = item.querySelector("img")?.getAttribute("src") || "";

                await addDoc(collection(db, "products"), {
                    name,
                    description,
                    price,
                    image,
                    createdAt: new Date()
                });

                imported++;
            }

            alert(`‚úÖ ${imported} menu successfully imported to Firestore!`);
        };
    </script>

    <!-- Reset cart count on reload -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Clear persisted cart
            localStorage.removeItem("cart");

            // Reset badge number
            const cartCount = document.querySelector(".cart-count");
            if (cartCount) cartCount.textContent = "0";
        });
    </script>


    <!-- Link to cart.js -->
    <script src="cart.js"></script>
</body>

</html>
